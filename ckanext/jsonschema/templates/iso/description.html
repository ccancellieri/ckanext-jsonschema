{% set resources = dataset.resources %}
{% set body = h.jsonschema_get_dataset_body(dataset) %}

{% set dataIdentification = body['dataIdentification'] %}

{% if dataIdentification.abstract %}
{{dataIdentification.abstract}}
{% endif %}

{% if dataIdentification.citation and dataIdentification.citation.dates %}
	{% for date in dataIdentification.citation.dates  %}
**Data {{date ['dateType']}}:** {{ date['date'] }}
	{% endfor %}
{% endif %}

{% if dataIdentification.supplementalInformation %}
**Supplemental Information:**

{{ dataIdentification.supplementalInformation }}
	
{% endif %}

{% if dataIdentification.citation and
	dataIdentification.citation.otherCitationDetails %}
**Citation:**

{{ dataIdentification.citation.otherCitationDetails }}
{% endif %}

**Contact points:**
{% for resource in resources %}
	{% set resource_type = h.jsonschema_get_resource_type(resource) %}
	{% set contact = h.jsonschema_get_resource_body(resource) %}
	{% set _label = resource_type %}
	{% if resource_type == 'resource-contact' %}
		{% set _label = 'Contact' %}
	{% elif resource_type == 'resource-maintainer' %}
		{% set _label = 'Maintainer' %}
	{% elif resource_type == 'point-of-contact' %}
		{% set _label = 'Point of contact' %}
	{% elif resource_type == 'metadata-contact' %}
		{% set _label = 'Metadata contact' %}
	{% elif resource_type == 'cited-responsible-party' %}
		{% set _label = 'Cited contact' %}
	{% endif %}
	{% if contact.contactInfo %}
		{% if contact.contactInfo.address
			and contact.contactInfo.address.electronicMailAddress %}
{{_label}}: [{{contact.individualName}}](mailto:{{contact.contactInfo.address.electronicMailAddress}}) {{contact.organisationName}}
		{% else %}
{{_label}}: {{contact.individualName}} {{contact.organisationName}}
		{% endif %}
	{% endif %}
{% endfor %}

{% set dataQualityInfo = body['dataQualityInfo'] %}
{% if dataQualityInfo and
	dataQualityInfo.lineage and
	dataQualityInfo.lineage.statement %}
**Data lineage:**

{{dataQualityInfo.lineage.statement}}
{% endif %}

{% if dataIdentification.resourceConstraints %}
	{% if dataIdentification.resourceConstraints and
		dataIdentification.resourceConstraints.legalConstraints and
			dataIdentification.resourceConstraints.legalConstraints.otherConstraints %}
**Resource constraints:**
		{% for other in dataIdentification.resourceConstraints.legalConstraints.otherConstraints %}
{{other}}
		{% endfor %}
	{% endif %}
{% endif %}

{% if resources %}
**Online resources:**

	{% for resource in resources %}
		{% set resource_type = h.jsonschema_get_resource_type(resource) %}
		{% if resource_type == 'online-resource' %}
			{% set body = h.jsonschema_get_resource_body(resource) %}
			{% if body.protocol %}
				{% if body.protocol.lower() == 'www:link-1.0-http--link' %}
[{{resource.description or resource.name}}]({{resource.url}})
				{% elif body.protocol.lower() == 'www:download-1.0-http--download' %}
[{{resource.description or resource.name}}]({{resource.url}})
				{% endif %}
			{% endif %}
		{% endif %}
	{% endfor %}
{% endif %}
