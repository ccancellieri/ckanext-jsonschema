{% extends 'package/snippets/resource_view.html' %}

{% block scripts %}
    {{ super() }}
{% endblock %}


{% block resource_view %}

    {% set OPT_KEY = h.jsonschema_get_opt_key() %}


    <div style="display: flex;justify-content: space-evenly;align-items: baseline;">
        <h2>Dataset: {{ package.name }}</h2>
        <a class="btn btn-info" data-toggle="tooltip" data-placement="top" title="Open configuration"
            href="{{h.url_for('terriajs.config', resource_view_id=resource_view.id, _external=True) }}" target="_blank">
            {{_('Open configuration')}}
        </a>
        <a class="btn btn-primary" data-toggle="tooltip" data-placement="top" title="Open item"
            href="{{h.url_for('terriajs.item', resource_view_id=resource_view.id, _external=True) }}" target="_blank">
            {{_('Open item')}}
        </a>
    </div>
    <div style="display:block; width: auto; height: auto;">
        <iframe style="display: block;width: 100%; height: 100%; min-height: 94vh;" src="{{config_view[OPT_KEY]['base_url']}}?api={{h.url_for('jsonschema.get_view_body', package_id=package['id'], resource_id=resource['id'], view_id=resource_view['id'], _external=True)}}" allowFullScreen mozAllowFullScreen webkitAllowFullScreen/>
    </div>
{% endblock %}